

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parameters and upgrade_parameters &mdash; CUNQA</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/css/nbgallery.css?v=50762a64" />
      <link rel="stylesheet" type="text/css" href="../_static/css/table.css?v=9571698f" />
      <link rel="stylesheet" type="text/css" href="../_static/css/sidebar.css?v=a8ff9168" />
      <link rel="stylesheet" type="text/css" href="../_static/css/python_domain.css?v=0ad3a607" />
      <link rel="stylesheet" type="text/css" href="../_static/css/general.css?v=1c682fb6" />

  
    <link rel="shortcut icon" href="../_static/cunca.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/tabs.js?v=3ee01567"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Further examples" href="../further_examples/further_examples.html" />
    <link rel="prev" title="Tools for DQC algorithms" href="tools_for_DQC.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

  <div class="sidebar-header">
    
    <div class="project-name"> 
      <a href="../index.html">CUNQA</a>
    </div>
    <div class="project-version">latest</div>
    <div></div>

    <!--<div class="version-switcher">
      <select onchange="location = this.value;">
        
      </select>
    </div>-->
  </div>


        </div>
  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation/getting_started.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick_start/quick_start.html">Quick start</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cunqa_overview.html">CUNQA overview</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cunqa_overview.html#virtual-qpu">Virtual QPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="cunqa_overview.html#quantum-circuits">Quantum circuits</a></li>
<li class="toctree-l2"><a class="reference internal" href="cunqa_overview.html#dqc-schemes">DQC schemes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="cunqa_overview.html#circuit-manipulation-techniques">Circuit Manipulation Techniques</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tools_for_DQC.html">    add, union and hsplit</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">    Parameters and upgrade_parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cunqa_overview.html#real-qpus">Real QPUs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../further_examples/further_examples.html">Further Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/reference.html">CUNQA reference</a></li>
</ul>

        </div>
  <div class="sidebar-logos">
    <a class="sidebar-logos__item" href="https://www.cesga.es/" target="_blank" rel="noopener">
      <img src="../_static/logo_cesga_blanco.png" alt="CESGA">
    </a>
    <a class="sidebar-logos__item" href="https://quantumspain-project.es/" target="_blank" rel="noopener">
      <img src="../_static/QuantumSpain_logo_white.png" alt="Quantum Spain">
    </a>
  </div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CUNQA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="cunqa_overview.html">CUNQA overview</a></li>
      <li class="breadcrumb-item active">Parameters and <cite>upgrade_parameters</cite></li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cunqa_overview/tools_for_VQAs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="parameters-and-upgrade-parameters">
<h1>Parameters and <cite>upgrade_parameters</cite><a class="headerlink" href="#parameters-and-upgrade-parameters" title="Link to this heading"></a></h1>
<p>Parameters are placeholders for the values of parametric gates like <cite>rx</cite>, <cite>rzz</cite> or <cite>u3</cite>. They are
designed to facilitate the execution of the same circuit multiple times with different values on its
parametric gates.</p>
<p>Parameters are given as a string when adding a gate. The strings determine the label for each parameter
or a expression built out of parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">circuit</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span>            <span class="n">qubit</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s2">&quot;x + y + z&quot;</span><span class="p">,</span>    <span class="n">qubit</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># Parameter expression with 3 variables. the &quot;x&quot; variable has the same value as in the previous gate</span>
<span class="n">circuit</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s2">&quot;cos(2*pi*z))&quot;</span><span class="p">,</span> <span class="n">qubit</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># Common functions can be used, and pi is interpreted as 3.1415..., the ratio of a circle&#39;s circumference to its diameter.</span>
</pre></div>
</div>
<p>Internally, parameters and parameter expressions are handled with the symbolic
calculus library <a class="reference external" href="docs.sympy.org/latest/index.html">sympy</a> so valid strings are restricted by the
<a class="reference external" href="https://docs.sympy.org/latest/modules/core.html#module-sympy.core.sympify">sympify function</a> that we use
to convert to <cite>sympy</cite> objects. The functions recognized include trigonometric, hyperbolic, exponetial and logarithmic ones.
Check a more complete list at the <a class="reference external" href="https://docs.sympy.org/latest/modules/functions/elementary.html#trigonometric-functions">sympy documentation</a> .</p>
<p>Values for parameters are giving as an argument of the run function, which can be a dict of a list.
The dict would contain as keys strings with the labels of the variables present across all parameters
with their corresponding int or float value associated, whereas the list would contain the values of
the parameters in order. Dict format is preferrable when complex expressions and repeated parameters
appear, while the list is fast in cases where there are no repeated parameters and each parameter
contains a single variable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parameters are given values when running</span>
<span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">,</span> <span class="n">qpu</span><span class="p">,</span> <span class="n">param_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="mf">4.5</span><span class="p">},</span> <span class="n">shots</span><span class="o">=</span> <span class="mi">1024</span><span class="p">)</span>
<span class="n">run</span><span class="p">(</span><span class="n">circuit</span><span class="p">,</span> <span class="n">qpu</span><span class="p">,</span> <span class="n">param_values</span><span class="o">=</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">],</span> <span class="n">shots</span><span class="o">=</span> <span class="mi">1024</span><span class="p">)</span>
</pre></div>
</div>
<p>For evaluating the same circuit that has been run but with new parameters, use <a class="reference internal" href="../reference/api/cunqa.qjob.html#cunqa.qjob.QJob.upgrade_parameters" title="cunqa.qjob.QJob.upgrade_parameters"><code class="xref py py-meth docutils literal notranslate"><span class="pre">upgrade_parameters</span></code></a>
on its associated <a class="reference internal" href="../reference/api/cunqa.qjob.html#cunqa.qjob.QJob" title="cunqa.qjob.QJob"><code class="xref py py-meth docutils literal notranslate"><span class="pre">QJob</span></code></a> object, where the parameters can be given again as a
list or a dict. Note that variables that are not given a new value keep the previous one.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># For another execution with new parameters, use QJob.upgrade_parameters()</span>
<span class="n">qjob</span><span class="o">.</span><span class="n">upgrade_parameters</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>
<span class="n">qjob</span><span class="o">.</span><span class="n">upgrade_parameters</span><span class="p">([</span>     <span class="mi">1004</span><span class="p">,</span>      <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span>      <span class="mi">4</span><span class="p">])</span> <span class="c1"># Same  with list</span>
<span class="n">qjob</span><span class="o">.</span><span class="n">upgrade_parameters</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">1004</span><span class="p">})</span> <span class="c1"># Upgrade just the value for &quot;x&quot;</span>
</pre></div>
</div>
<p>Check the following complete example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span><span class="o">,</span><span class="w"> </span><span class="nn">sys</span>
<span class="c1"># In order to import cunqa, we append to the search path the cunqa installation path</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;HOME&quot;</span><span class="p">))</span> <span class="c1"># HOME as install path is specific to CESGA</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">cunqa.qpu</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_QPUs</span><span class="p">,</span> <span class="n">qraise</span><span class="p">,</span> <span class="n">qdrop</span><span class="p">,</span> <span class="n">run</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cunqa.circuit</span><span class="w"> </span><span class="kn">import</span> <span class="n">CunqaCircuit</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># 1. Deploy QPU</span>
    <span class="c1"># If GPU execution is desired, just add &quot;gpu = True&quot; as another qraise argument</span>
    <span class="n">family</span> <span class="o">=</span> <span class="n">qraise</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;00:10:00&quot;</span><span class="p">,</span>  <span class="n">co_located</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">qpu</span> <span class="o">=</span> <span class="n">get_QPUs</span><span class="p">(</span><span class="n">co_located</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">family</span> <span class="o">=</span> <span class="n">family</span><span class="p">)</span>

    <span class="c1"># ---------------------------</span>
    <span class="c1"># 2. Design circuit:</span>
    <span class="c1">#  circ_upgrade.q0   ─[RX(cos(x))]─────[M]─</span>
    <span class="c1">#                        </span>
    <span class="c1">#  circ_upgrade.q1   ─[RX(y)]──────────[M]─</span>
    <span class="c1">#</span>
    <span class="c1">#  circ_upgrade.q2   ─[RX(z)]──────────[M]─</span>
    <span class="c1"># ---------------------------</span>
    <span class="n">circ_upgrade</span> <span class="o">=</span> <span class="n">CunqaCircuit</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">circ_upgrade</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="s2">&quot;cos(x)&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">circ_upgrade</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">circ_upgrade</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">circ_upgrade</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>

    <span class="c1"># 3. Execute circuit</span>
    <span class="n">qjob</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">circ_upgrade</span><span class="p">,</span> <span class="n">qpu</span><span class="p">,</span> <span class="n">param_values</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result 0: </span><span class="si">{</span><span class="n">qjob</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">counts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Upgrade with dicts</span>
    <span class="n">qjob</span><span class="o">.</span><span class="n">upgrade_parameters</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result 1: </span><span class="si">{</span><span class="n">qjob</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">counts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Upgrade with a dict with only some of the Variables (previous values are preserved)</span>
    <span class="n">qjob</span><span class="o">.</span><span class="n">upgrade_parameters</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">})</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result 2: </span><span class="si">{</span><span class="n">qjob</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">counts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Now with a list</span>
    <span class="n">qjob</span><span class="o">.</span><span class="n">upgrade_parameters</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Result 3: </span><span class="si">{</span><span class="n">qjob</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">counts</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># 4. Relinquish resources</span>
    <span class="n">qdrop</span><span class="p">(</span><span class="n">family</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
    <span class="n">qdrop</span><span class="p">(</span><span class="n">family</span><span class="p">)</span>
    <span class="k">raise</span> <span class="n">error</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tools_for_DQC.html" class="btn btn-neutral float-left" title="Tools for DQC algorithms" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../further_examples/further_examples.html" class="btn btn-neutral float-right" title="Further examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Álvaro Carballido, Marta Losada, Jorge Vázquez, Daniel Expósito.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>